pipeline {
  agent {
    kubernetes {
      yaml '''
        apiVersion: v1
        kind: Pod
        spec:
          containers:
          - name: python-podman
            image: docker.io/javapig/demo-app:non-root-jenkins-agent-python-gettext
            command:
            - cat
            tty: true
            securityContext:
              runAsUser: 0
            magePullPolicy: Always
          imagePullSecrets:
          - name: my-registry-key
        '''
    }
  }
   stages {
    stage('Run build image') {
            steps {
              container('python-podman') {
                sh "ls"
                sh "echo Dockerfile-OCP"
                sh "sleep 100"
                sh "podman version"
              }
            }      
     }
   }
}
